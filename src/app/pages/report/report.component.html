<div class="box box-default"><div class="box-body"><div class="row">
	<div class="col-md-12" style="margin-bottom: 10px;">
		<button class="btn btn-success pull-right" (click)="report.openProjectsDialog()">
			<i class="fa fa-plus fa-fw"></i> Ajouter un projet
        </button>
	</div>
	<div class="col-md-12" style="margin-bottom: 10px;">
        <activity-report #report [currentMonth]="currentMonth" (values)="onValuesChanges($event)"></activity-report>
        <loading-cube class="box-body" [hidden]="!reportProgress"></loading-cube>
            <div class="col-md-12" [hidden]="reportProgress || (view && view.shownProjects.length)">
                <p class="text-muted">
                    <i>Ce tableau ne contient aucun projet client. <a (click)="report.openProjectsDialog()"><i class="fa fa-plus fa-fw"></i> Ajouter un projet</a> ?</i>
                </p>
            </div>
        <hr>
        <p align="right" [hidden]="reportProgress">
            <button type="button" class="btn btn-default pull-left" (click)="goToHistory()"><i class="fa fa-history fa-fw"></i> Accéder à l'historique</button>
            <button type="button" class="btn btn-primary" (click)="saveReport()"><i class="fa fa-save fa-fw"></i> Enregistrer</button>
            <button type="button" class="btn btn-warning" (click)="submitReportModal.show()"><i class="fa fa-upload fa-fw"></i> Soumettre pour validation</button>
        </p>
	</div>
</div></div></div>

<modal-dialog #submitReportModal color="warning">
    <div class="modal-dialog-header">Validation du compte rendu d'activité</div>
    <div class="modal-dialog-body">
        <i class="fa fa-exclamation-circle fa-fw"></i>
        Une fois soumis, le compte rendu d'activité du mois de <b>{{currentMonthName}}</b> ne pourra plus être modifié.
    </div>
    <div class="modal-dialog-footer">
        <button type="button" class="btn btn-default" (click)="submitReportModal.hide()">Annuler</button>
        <button type="button" class="btn btn-danger" (click)="submitReport(); submitReportModal.hide()"><i class="fa fa-upload fa-fw"></i> Valider</button>
    </div>
</modal-dialog>
